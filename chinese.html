<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>#ì¤‘ì‹ ë§›ì§‘</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cute+Font&family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="team2.css">
  <style>
    /* ì´ ìŠ¤íƒ€ì¼ ë¸”ë¡ì€ ê²€ìƒ‰ ë° í•„í„° ì„¹ì…˜ì˜ ì›ë˜ ë ˆì´ì•„ì›ƒì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤ */
    /* í—¤ë”, í‘¸í„° ë° ê¸°ë³¸ ë³¸ë¬¸ ê¸€ê¼´ê³¼ ê´€ë ¨ëœ ëª¨ë“  ìŠ¤íƒ€ì¼ì€ team2.cssì— ì˜í•´ ì œê±°ë˜ê±°ë‚˜ ì¬ì •ì˜ë©ë‹ˆë‹¤ */

    body {
      font-family: "Cute Font", sans-serif; /* ë³¸ë¬¸ì— Cute Font ì ìš© */
      font-size: 1.5em; /* ê°€ë…ì„±ì„ ìœ„í•´ ê¸€ê¼´ í¬ê¸° ì¦ê°€ */
      margin: 0;
      background-color: #fafafa;
      color: #333;
    }

    /* í—¤ë”ë¥¼ ìœ„í•´ team2.cssê°€ ì ìš©ë˜ë„ë¡ ì›ë˜ í—¤ë” ìŠ¤íƒ€ì¼ ì œê±° */

    .search-section {
      background:
        linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.1)),
        url("./categoryimages/í¬í•­/í¬í•­4.webp");
      background-size: cover;
      background-position: center;
      padding: 40px 0 80px;
      box-shadow: inset 0 -50px 50px rgba(0, 0, 0, 0.2);
      transition: background 0.5s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .top-nav {
        display: flex; /* ê°€ë¡œ ì •ë ¬ ë³´ì¥ */
        justify-content: center;
        gap: 20px; /* ë‘ íƒ­ ì‚¬ì´ ê°„ê²© */
        margin-bottom: 20px;
    }

    .top-nav div {
        cursor: pointer;
        padding: 10px 20px;
        border-radius: 20px;
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
        transition: background-color 0.3s, color 0.3s;
        font-weight: bold;
    }

    .top-nav div.active {
        background-color: #1c264f; /* ì§™ì€ íŒŒë‘ (#1c264f)ìœ¼ë¡œ ë³€ê²½ */
        color: white;
    }

    .top-nav div:hover {
        background-color: rgba(28, 38, 79, 0.7); /* í˜¸ë²„ ì‹œ ë” ì§™ì€ íŒŒë‘ */
    }


    .search-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      gap: 15px;
    }

    .search-box {
      display: flex;
      align-items: center;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 30px;
      padding: 8px 20px;
      width: 500px;
      max-width: 90%;
    }

    .search-box img {
      width: 20px;
      margin-right: 10px;
    }

    .search-box input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 0.7em; /* 0.7emìœ¼ë¡œ ë³€ê²½ */
      font-family: serif; /* serifë¡œ ë³€ê²½ */
    }

    .filter-tag-section {
      background-color: #fff;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
      padding: 15px 0;
      margin-bottom: 5px; /* ê°„ê²© ì¤„ì„ */
    }

    .filter-tag-wrapper {
      max-width: 1300px;
      margin: auto;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      padding: 0 30px;
    }

    .filter-tag-button {
      display: flex;
      align-items: center;
      background-color: #f0f0f0;
      border: 1px solid #ddd;
      border-radius: 20px;
      padding: 8px 15px;
      font-family: serif;
      font-size: 0.6em;
      cursor: pointer;
      color: #333;
      transition: background-color 0.3s, color 0.3s;
    }

    .filter-tag-button:hover {
      background-color: #e0e0e0;
    }

    .filter-tag-button img {
      width: 18px;
      height: 18px;
      margin-right: 5px;
      filter: brightness(0.5);
    }

    .filter-tag-button:hover img {
      filter: brightness(0.2);
    }

    .category-tag {
        background-color: #eee;
        border: 1px solid #1c264f;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 0.6em;
        font-family: serif;
        cursor: pointer;
        color: #333;
        transition: background-color 0.3s, color 0.3s;
    }

    .category-tag.selected {
        background-color: #ff6f61;
        color: #fff;
        border-color: #ff6f61;
    }
    .category-tag:hover {
        background-color: #ff6f61;
        color: #fff;
        border-color: #ff6f61;
    }

    /* í‘¸í„°ë¥¼ ìœ„í•´ team2.cssê°€ ì ìš©ë˜ë„ë¡ ì›ë˜ í‘¸í„° ìŠ¤íƒ€ì¼ ì œê±° */

    /* í•„í„° ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .filter-modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
      padding-top: 60px;
    }

    .filter-modal-content {
      background-color: #fefefe;
      margin: 5% auto;
      padding: 30px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 10px;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
    }

    .close-button {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close-button:hover,
    .close-button:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .filter-group {
      margin-bottom: 20px;
    }

    .filter-group h4 {
      margin-top: 0;
      margin-bottom: 10px;
      color: #1c264f;
    }

    .filter-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .filter-option {
      background-color: #eee;
      border: 1px solid #ccc;
      border-radius: 20px;
      padding: 8px 15px;
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s;
    }

    .filter-option.selected {
      background-color: #6699ff;
      color: #fff;
      border-color: #6699ff;
    }

    .apply-filters-button {
      background-color: #ff6f61;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1.1em;
      display: block;
      width: 100%;
      margin-top: 20px;
      transition: background-color 0.3s;
    }

    .apply-filters-button:hover {
      background-color: #e55a4e;
    }

    .results-and-sort-container {
        display: flex;
        justify-content: space-between; /* ì–‘ ë ì •ë ¬ */
        align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
        max-width: 1300px;
        margin: 5px auto; /* ìƒí•˜ ê°„ê²© ì¤„ì„ */
        padding: 0 30px; /* ì¢Œìš° íŒ¨ë”© ì¶”ê°€ */
    }

    .sort-dropdown select {
        padding: 8px 15px;
        border-radius: 20px;
        border: 1px solid #ccc;
        background-color: #fff;
        font-size: 0.7em; /* 0.7emìœ¼ë¡œ ë³€ê²½ */
        cursor: pointer;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20256%20256%22%3E%3Cpath%20fill%3D%22%23333333%22%20d%3D%22M208.5%2096.5l-80%2080c-4.7%204.7-12.3%204.7-17%200l-80-80c-4.7-4.7-4.7-12.3%200-17s12.3-4.7%2017%200L128%20150.5l71.5-71.5c4.7-4.7%2012.3-4.7%2017%200s4.7%2012.3%200%2017z%22%2F%3E%3C%2Fsvg%3E');
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 12px;
        padding-right: 30px;
        font-family: serif; /* serifë¡œ ë³€ê²½ */
    }

    .search-results-count {
        font-size: 0.7em; /* 0.7emìœ¼ë¡œ ë³€ê²½ */
        color: #555;
        font-family: serif; /* serifë¡œ ë³€ê²½ */
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      padding: 10px 30px 30px; /* ìƒë‹¨ ê°„ê²© ë” ì¤„ì„ */
      max-width: 1300px;
      margin: auto;
    }

    .card {
      width: 100%;
      height: 400px;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative; /* ì¶”ì²œ ë²„íŠ¼ì„ ìœ„í•œ ìœ„ì¹˜ ì§€ì • */
    }

    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }

    .card-content {
      font-size: 0.8em;
      padding: 15px;
      height: 180px;
      box-sizing: border-box;
    }

    .category {
      font-size: 0.9em;
      color: #888;
      margin-bottom: 5px;
    }

    .card h3 {
      font-family: serif;
      margin: 5px 0;
      font-size: 1.2em;
      color: #000;
    }

    .location {
      font-size: 0.75em;
      font-family: serif;
      display: flex;
      align-items: center;
      margin: 5px 0;
      color: #ff6f61;
    }

    .location::before {
      content: "ğŸ“";
      margin-right: 5px;
    }

    .menu {
      font-size: 0.7em;
      color: #444;
    }

    .mainmenu{
      font-family: serif;
      font-size: 0.7em;
      color: #444;
    }

    /* ì¶”ì²œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .recommendation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 15px 10px;
      font-size: 0.75em;
    }

    .recommendation-button {
      background-color: #4CAF50; /* Green */
      color: white;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .recommendation-button:hover {
      background-color: #45a049;
    }

    @media screen and (max-width: 1024px) {
      .card-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .search-box {
        width: 90%;
      }
      .filter-tag-wrapper, .results-and-sort-container {
        padding: 0 15px;
      }
    }

    @media screen and (max-width: 600px) {
      .card-grid {
        grid-template-columns: repeat(1, 1fr);
      }
      .search-box {
        width: 90%;
      }
      .filter-modal-content {
        width: 90%;
      }
      .filter-tag-wrapper, .results-and-sort-container {
        padding: 0 10px;
        justify-content: center;
        flex-direction: column;
        gap: 10px;
      }
      .sort-dropdown {
          width: 100%;
          text-align: right;
      }
      .search-results-count {
          width: 100%;
          text-align: left;
      }
    }
  </style>
</head>
<body>

  <header>
    <img src="./images/pohang.jpg" width="40" height="40" alt="í¬í•­">
  <a href="./Team2.html" class="logo">
    <span class="bold-underline">POCHELIN</span> <span class="blue-text">GUIDE</span>
  </a>
  <nav class="menu">
      <a href="#mood">MOOD</a>
      <a href="#category">CATEGORY</a>
      <a href="#review">REVIEW</a>
    </nav>
  </header>

  <div class="search-section">
    <div class="top-nav">
      <div class="active" data-search-type="integrated">í†µí•©ê²€ìƒ‰</div>
      <div data-search-type="restaurant">ì‹ë‹¹ëª… ê²€ìƒ‰</div>
    </div>

    <div class="search-container">
      <div class="search-box">
        <img src="./categoryimages/icon/ë‹ë³´ê¸°.png" alt="ë‹ë³´ê¸°">
        <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
      </div>
    </div>
  </div>

  <div class="filter-tag-section">
    <div class="filter-tag-wrapper" id="filterTagWrapper">
      <div class="filter-tag-button" onclick="openFilterModal()">
        <img src="./categoryimages/icon/í•„í„°.png" alt="í•„í„°">
        <span>í•„í„°</span>
      </div>
      <div class="category-tag selected" data-category="ì „ì²´" data-filter-type="category">ì „ì²´</div>
      <div class="category-tag" data-category="í•œì‹" data-filter-type="category">í•œì‹</div>
      <div class="category-tag" data-category="ë‚´ ì£¼ë³€" data-filter-type="category">ë‚´ ì£¼ë³€</div>
      </div>
  </div>

  <div class="results-and-sort-container">
    <div class="search-results-count" id="searchResultsCount">3ê°œ ê²€ìƒ‰ ê²°ê³¼</div>
    <div class="sort-dropdown">
        <select id="sortSelect">
            <option value="name_asc">ê°€ë‚˜ë‹¤ìˆœ</option>
            <option value="recommendation_desc">ì¶”ì²œìˆœ</option>
        </select>
    </div>
  </div>

  <div class="card-grid" id="restaurantCardsContainer">
    </div>

  <div id="filterModal" class="filter-modal">
    <div class="filter-modal-content">
      <span class="close-button" onclick="closeFilterModal()">&times;</span>
      <h5>í•„í„° ì ìš©</h5>

      <div class="filter-group">
        <h4>ê°€ê²©ëŒ€</h4>
        <div class="filter-options" id="priceFilterOptions">
          <div class="filter-option" data-value="~1ë§Œì›" data-filter-type="price">~1ë§Œì›</div>
          <div class="filter-option" data-value="1ë§Œì›~2ë§Œì›" data-filter-type="price">1ë§Œì›~2ë§Œì›</div>
          <div class="filter-option" data-value="3ë§Œì›~5ë§Œì›" data-filter-type="price">3ë§Œì›~5ë§Œì›</div>
          <div class="filter-option" data-value="5ë§Œì›~" data-filter-type="price">5ë§Œì›~</div>
        </div>
      </div>

      <div class="filter-group">
        <h4>ë°©ë¬¸ëª©ì </h4>
        <div class="filter-options" id="purposeFilterOptions">
          <div class="filter-option" data-value="ê°€ì¡±ëª¨ì„" data-filter-type="purpose">ê°€ì¡±ëª¨ì„</div>
          <div class="filter-option" data-value="ë°ì´íŠ¸" data-filter-type="purpose">ë°ì´íŠ¸</div>
          <div class="filter-option" data-value="í˜¼ë°¥" data-filter-type="purpose">í˜¼ë°¥</div>
          <div class="filter-option" data-value="ì†Œê°œíŒ…" data-filter-type="purpose">ì†Œê°œíŒ…</div>
          <div class="filter-option" data-value="íšŒì‹" data-filter-type="purpose">íšŒì‹</div>
          <div class="filter-option" data-value="ì•„ì¹¨ì‹ì‚¬" data-filter-type="purpose">ì•„ì¹¨ì‹ì‚¬</div>
          <div class="filter-option" data-value="í•´ì¥" data-filter-type="purpose">í•´ì¥</div>
          <div class="filter-option" data-value="í˜¼ìˆ " data-filter-type="purpose">í˜¼ìˆ </div>
          <div class="filter-option" data-value="ì™¸ì‹" data-filter-type="purpose">ì™¸ì‹</div>
        </div>
      </div>

      <button class="apply-filters-button" onclick="applyFilters()">í•„í„° ì ìš©</button>
    </div>
  </div>

  <footer>
  <p>Â© 2025 POCHELIN GUIDE. All rights reserved.</p>
  <p>ë¬¸ì˜: <a href="mailto:contact@pochelin.kr">contact@pochelin.kr</a></p>
  <p>ì œì‘: Team 2 Web Project</p>
</footer>


  <script>
    // ğŸ’¡ JavaScript ì‹œì‘
    const restaurantCardsContainer = document.getElementById('restaurantCardsContainer');
    const searchInput = document.getElementById('searchInput');
    const sortSelect = document.getElementById('sortSelect');
    const searchResultsCount = document.getElementById('searchResultsCount');
    const filterTagWrapper = document.getElementById('filterTagWrapper');
    const priceFilterOptions = document.getElementById('priceFilterOptions');
    const purposeFilterOptions = document.getElementById('purposeFilterOptions');

    // ì‹ë‹¹ ë°ì´í„° (JavaScript ë°°ì—´ë¡œ ê´€ë¦¬í•˜ì—¬ ì •ë ¬ ë° í•„í„°ë§ ìš©ì´í•˜ê²Œ í•¨)
    // ì‹¤ì œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ ë°ì´í„°ëŠ” ë°±ì—”ë“œ ì„œë²„ë‚˜ APIì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.
    let restaurantData = [
      
      
    ];

    let currentFilters = {
        categories: ['í•œì‹'], // ì´ˆê¸°ì—ëŠ” 'í•œì‹'ë§Œ ì„ íƒëœ ê²ƒìœ¼ë¡œ ê°€ì • (í•œì‹.htmlì´ë¯€ë¡œ)
        priceRanges: [],
        purposes: []
    };
    let currentSearchTerm = '';
    let currentSort = 'name_asc'; // ì´ˆê¸° ì •ë ¬ ê¸°ì¤€

    // ì¹´ë“œ ë Œë”ë§ í•¨ìˆ˜
    function renderCards(dataToRender) {
      restaurantCardsContainer.innerHTML = ''; // ê¸°ì¡´ ì¹´ë“œ ëª¨ë‘ ì œê±°
      searchResultsCount.textContent = `${dataToRender.length}ê°œ ê²€ìƒ‰ ê²°ê³¼`;

      if (dataToRender.length === 0) {
          restaurantCardsContainer.innerHTML = '<p style="text-align: center; width: 100%; grid-column: span 4;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
          return;
      }

      dataToRender.forEach(restaurant => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <a href="./ë¬´ì—‡ì„ë¨¹ì„ê¹Œìš”.ì‹ë‹¹ì„¤ëª….html" target="_blank">
            <img src="${restaurant.image}" alt="${restaurant.name}">
          </a>
          <div class="card-content">
            <div class="category">${restaurant.category}</div>
            <h3>${restaurant.name}</h3>
            <div class="location">${restaurant.location}</div>
            <div class="mainmenu">${restaurant.mainmenu}</div>
          </div>
          <div class="recommendation">
            <span>ì¶”ì²œ ì§€ìˆ˜: ${restaurant.recommendationScore}</span>
            <button class="recommendation-button" data-id="${restaurant.id}">ë§Œì¡±í•´ìš”!</button>
          </div>
        `;
        restaurantCardsContainer.appendChild(card);
      });

      // ìƒˆë¡œ ìƒì„±ëœ ì¶”ì²œ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
      document.querySelectorAll('.recommendation-button').forEach(button => {
          button.onclick = function() {
              const id = parseInt(this.dataset.id);
              incrementRecommendationScore(id);
          };
      });
    }

    // ë°ì´í„° í•„í„°ë§ ë° ì •ë ¬ í•¨ìˆ˜
    function filterAndSortCards() {
        let filteredData = [...restaurantData]; // ì›ë³¸ ë°ì´í„° ë³µì‚¬

        // 2. ê²€ìƒ‰ì–´ í•„í„°ë§ (ì‹ë‹¹ ì´ë¦„, ìŒì‹ëª…, ì§€ì—­)
        if (currentSearchTerm) {
            const searchType = document.querySelector('.top-nav div.active').dataset.searchType;
            const searchTermLower = currentSearchTerm.toLowerCase();

            filteredData = filteredData.filter(restaurant => {
                const nameMatch = restaurant.name.toLowerCase().includes(searchTermLower);
                if (searchType === 'restaurant') {
                    return nameMatch;
                } else { // integrated search
                    const menuMatch = restaurant.mainmenu.toLowerCase().includes(searchTermLower);
                    const locationMatch = restaurant.location.toLowerCase().includes(searchTermLower) || restaurant.region.toLowerCase().includes(searchTermLower);
                    return nameMatch || menuMatch || locationMatch;
                }
            });
        }

        // 3. í•„í„°ë§ (ì¹´í…Œê³ ë¦¬, ê°€ê²©ëŒ€, ë°©ë¬¸ëª©ì )
        filteredData = filteredData.filter(restaurant => {
            // ì¹´í…Œê³ ë¦¬ í•„í„°
            const categoryMatch = currentFilters.categories.includes('ì „ì²´') || currentFilters.categories.includes(restaurant.category.replace('#', ''));
            // 'ë‚´ ì£¼ë³€'ì€ ì‹¤ì œ ìœ„ì¹˜ ê¸°ë°˜ ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ ì„ì‹œë¡œ 'í™˜í˜¸ë™'ë§Œ ë³´ì—¬ì¤€ë‹¤ê³  ê°€ì •
            const nearMeMatch = !currentFilters.categories.includes('ë‚´ ì£¼ë³€') || restaurant.region === 'í™˜í˜¸ë™';

            // ê°€ê²©ëŒ€ í•„í„°
            const priceMatch = currentFilters.priceRanges.length === 0 || currentFilters.priceRanges.includes(restaurant.priceRange);

            // ë°©ë¬¸ëª©ì  í•„í„° (í•˜ë‚˜ë¼ë„ ì¼ì¹˜í•˜ë©´ O)
            const purposeMatch = currentFilters.purposes.length === 0 ||
                                 currentFilters.purposes.some(purpose => restaurant.purposes.includes(purpose));

            return categoryMatch && nearMeMatch && priceMatch && purposeMatch;
        });


        // 1. ì •ë ¬
        if (currentSort === 'name_asc') {
            filteredData.sort((a, b) => a.name.localeCompare(b.name));
        } else if (currentSort === 'recommendation_desc') {
            filteredData.sort((a, b) => b.recommendationScore - a.recommendationScore);
        }

        renderCards(filteredData);
    }

    // 1. ê°€ë‚˜ë‹¤ìˆœ/ì¶”ì²œìˆœ ì •ë ¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    sortSelect.addEventListener('change', (event) => {
      currentSort = event.target.value;
      filterAndSortCards();
    });

    // 2. ê²€ìƒ‰ì–´ ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    searchInput.addEventListener('keyup', (event) => {
      currentSearchTerm = event.target.value;
      filterAndSortCards();
    });

    // ê²€ìƒ‰ íƒ­ í´ë¦­ ì‹œ í”Œë ˆì´ìŠ¤í™€ë” ë³€ê²½ ë° ì¬í•„í„°ë§
    document.querySelectorAll('.top-nav div').forEach(tab => {
        tab.addEventListener('click', function() {
            document.querySelectorAll('.top-nav div').forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            const searchType = this.dataset.searchType;
            if (searchType === 'restaurant') {
                searchInput.placeholder = 'ì‹ë‹¹ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
            } else {
                searchInput.placeholder = 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”';
            }
            // ê²€ìƒ‰ íƒ€ì…ì´ ë°”ë€Œë©´ ì¬í•„í„°ë§
            filterAndSortCards();
        });
    });

    // 3. í•„í„° ëª¨ë‹¬ ì—´ê¸°
    function openFilterModal() {
      document.getElementById('filterModal').style.display = 'block';
    }

    // 3. í•„í„° ëª¨ë‹¬ ë‹«ê¸°
    function closeFilterModal() {
      document.getElementById('filterModal').style.display = 'none';
    }

    // 3. í•„í„° ì˜µì…˜ ì„ íƒ/í•´ì œ í† ê¸€
    document.querySelectorAll('.filter-option').forEach(option => {
      option.addEventListener('click', function() {
        this.classList.toggle('selected');
      });
    });

    // 3. í•„í„° ì ìš© ë° íƒœê·¸ ìƒì„±/ì—…ë°ì´íŠ¸
    function applyFilters() {
        // í˜„ì¬ ì„ íƒëœ í•„í„° ì´ˆê¸°í™”
        currentFilters.priceRanges = Array.from(priceFilterOptions.querySelectorAll('.filter-option.selected'))
                                        .map(option => option.dataset.value);
        currentFilters.purposes = Array.from(purposeFilterOptions.querySelectorAll('.filter-option.selected'))
                                    .map(option => option.dataset.value);

        // 'ì „ì²´' ë° 'ë‚´ ì£¼ë³€'ì„ ì œì™¸í•œ ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ íƒœê·¸ ì œê±°
        filterTagWrapper.querySelectorAll('.category-tag[data-filter-type="filter-applied"]').forEach(tag => tag.remove());

        // í•„í„° ì˜µì…˜ì—ì„œ ì„ íƒëœ ê°’ë“¤ì„ íƒœê·¸ë¡œ ì¶”ê°€
        [...currentFilters.priceRanges, ...currentFilters.purposes].forEach(filterValue => {
            const newTag = document.createElement('div');
            newTag.className = 'category-tag selected'; // ì ìš©ëœ í•„í„°ì´ë¯€ë¡œ selected ìœ ì§€
            newTag.textContent = filterValue;
            newTag.dataset.category = filterValue; // í•„í„°ë§ì— ì‚¬ìš©í•  ê°’
            newTag.dataset.filterType = 'filter-applied'; // ì ìš©ëœ í•„í„° íƒœê·¸ì„ì„ ëª…ì‹œ
            newTag.onclick = function() {
                // íƒœê·¸ í´ë¦­ ì‹œ í•´ë‹¹ í•„í„° í•´ì œ
                if (priceFilterOptions.querySelector(`.filter-option[data-value="${filterValue}"]`)) {
                    priceFilterOptions.querySelector(`.filter-option[data-value="${filterValue}"]`).classList.remove('selected');
                }
                if (purposeFilterOptions.querySelector(`.filter-option[data-value="${filterValue}"]`)) {
                    purposeFilterOptions.querySelector(`.filter-option[data-value="${filterValue}"]`).classList.remove('selected');
                }
                applyFilters(); // í•„í„° ì¬ì ìš©
            };
            filterTagWrapper.appendChild(newTag);
        });

        // ì¹´í…Œê³ ë¦¬ íƒœê·¸ (ì „ì²´, í•œì‹, ë‚´ ì£¼ë³€) ì„ íƒ ìƒíƒœ ê´€ë¦¬
        document.querySelectorAll('.category-tag[data-filter-type="category"]').forEach(tag => {
            tag.classList.remove('selected');
            if (tag.dataset.category === 'í•œì‹') { // 'í•œì‹' í˜ì´ì§€ì´ë¯€ë¡œ ê¸°ë³¸ 'í•œì‹' ì„ íƒ
                tag.classList.add('selected');
                currentFilters.categories = ['í•œì‹'];
            } else if (tag.dataset.category === 'ì „ì²´' && currentFilters.categories.length === 0) {
                 tag.classList.add('selected'); // í•„í„° ì—†ì„ ì‹œ 'ì „ì²´' ì„ íƒ
                 currentFilters.categories = ['ì „ì²´'];
            }
        });
         // 'ì „ì²´' ë˜ëŠ” 'ë‚´ ì£¼ë³€' íƒœê·¸ í´ë¦­ ì‹œ
        document.querySelectorAll('.category-tag[data-filter-type="category"]').forEach(tag => {
            tag.addEventListener('click', function() {
                document.querySelectorAll('.category-tag[data-filter-type="category"]').forEach(t => t.classList.remove('selected'));
                this.classList.add('selected');
                currentFilters.categories = [this.dataset.category]; // ì„ íƒëœ ì¹´í…Œê³ ë¦¬ ì„¤ì •
                filterAndSortCards();
            });
        });


        filterAndSortCards(); // í•„í„° ì ìš© í›„ ì¹´ë“œ ì¬ë Œë”ë§
        closeFilterModal();
    }


    // "ì¶”ì²œí•´ìš”!" ë²„íŠ¼ í´ë¦­ ì‹œ ì¶”ì²œ ì§€ìˆ˜ ì¦ê°€ (ë¡œì»¬ì—ì„œë§Œ, ë°±ì—”ë“œ í•„ìš”)
    function incrementRecommendationScore(id) {
        const restaurant = restaurantData.find(r => r.id === id);
        if (restaurant) {
            restaurant.recommendationScore++;
            alert(`${restaurant.name}ì˜ ì¶”ì²œ ì§€ìˆ˜ê°€ ${restaurant.recommendationScore}ë¡œ ì¦ê°€í–ˆìŠµë‹ˆë‹¤!`);
            filterAndSortCards(); // ì§€ìˆ˜ ë³€ê²½ í›„ ì¬ì •ë ¬ì„ ìœ„í•´ í˜¸ì¶œ
        }
    }


    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë Œë”ë§
    window.onload = function () {
      filterAndSortCards(); // ì´ˆê¸° ë¡œë“œ ì‹œ í•„í„° ë° ì •ë ¬ ì ìš©
    };
    // ğŸ’¡ JavaScript ë
  </script>

</body>
</html>